<div class="page">
  <mat-card class="table-card">
    <div class="card-header">
      <div class="title-block">
        <h2 class="text-white">Students & Parents</h2>
        <p class="text-gray">List with search, sort and pagination</p>
      </div>

      <mat-form-field appearance="outline" class="search-field">
        <mat-label>Search</mat-label>
        <input matInput (keyup)="onSearch(searchInput.value)" placeholder="Search by any field" #searchInput
          class="text-white" />
        <mat-icon>search</mat-icon>
      </mat-form-field>
    </div>

    <div class="table-wrapper">

      <!-- <ng-container *ngIf="loading; else tableData">
        <table class="skeleton-table">
          <tr>
            <ngx-skeleton-loader [count]="pageSize" animation="pulse" [theme]="{
                'border-radius': '5px',
                height: '50px',
                'background-color': '#323232',
                border: '1px solid #323232',
                'animation-duration': '2s'
              }">
            </ngx-skeleton-loader>
          </tr>
        </table>
      </ng-container> -->

      <table mat-table [dataSource]="students" matSort (matSortChange)="onSortChange($event)">
        <ng-container *ngFor="let column of displayedColumns" [matColumnDef]="column">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            <span class="text-white">{{ column }}</span>
          </th>
          <td mat-cell *matCellDef="let row">
            <span class="text-light">{{ row[getFormattedPropertyName(column)] }}</span>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <!-- <ng-template #tableData> -->
        <tr mat-row *matRowDef="let row; columns: displayedColumns" class="clickable-row">
        </tr>
        <!-- </ng-template> -->
      </table>
    </div>

    <mat-divider></mat-divider>

    <div class="paginator-wrapper">
      <mat-paginator [length]="totalItems" [pageIndex]="pageIndex" [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 20]"
        (page)="onPageChange($event)" showFirstLastButtons class="dark-paginator">
      </mat-paginator>
    </div>
  </mat-card>
</div>
